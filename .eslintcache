[{"/Users/adamcastro/Desktop/ACP/canvas-card/src/cards/Canvascard.jsx":"1"},{"size":2581,"mtime":1691097961261,"results":"2","hashOfConfig":"3"},{"filePath":"4","messages":"5","suppressedMessages":"6","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"7"},"14l2gk8","/Users/adamcastro/Desktop/ACP/canvas-card/src/cards/Canvascard.jsx",["8"],[],"import React, { useEffect, useState } from \"react\";\nimport { Button, makeStyles } from \"@ellucian/react-design-system/core\";\nimport {\n  spacing40,\n  spacing30\n} from \"@ellucian/react-design-system/core/styles/tokens\";\n\nconst useStyles = makeStyles((theme) => ({\n  canvasLogin: {\n    marginLeft: spacing40,\n    marginTop: spacing30\n  }\n}));\n\nfunction App() {\n  const [accessToken, setAccessToken] = useState(null);\n  const [data, setData] = useState(null);\n  const classes = useStyles();\n\n  const handleButtonClick = () => {\n    const authUrl = `https://canvas.uiw.edu/login/oauth2/auth?client_id=139460000000000141&response_type=code&redirect_uri=https://experience-test.elluciancloud.com/uotiwtest/&scope=url:GET|/api/v1/courses`;\n    window.location.href = authUrl;\n  };\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n\n    if (code) {\n      fetch(`https://rmha5bol53.execute-api.us-east-2.amazonaws.com/default/canvas-api-handler?code=${code}`)\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error(`Fetch operation 1 failed with status: ${response.status}`);\n          }\n          return response.json();\n        })\n        .then((data) => {\n          if (data && data.access_token) {\n            setAccessToken(data.access_token);\n          } else {\n            console.error('Fetch operation 1: The response object or the access_token is undefined.');\n          }\n        })\n        .catch((error) => console.error('Fetch operation 1: There was an error:', error));\n\n      urlParams.delete(\"code\");\n      window.history.replaceState({}, \"\", `${window.location.pathname}?${urlParams}`);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (accessToken) {\n      fetch(`https://rmha5bol53.execute-api.us-east-2.amazonaws.com/default/canvas-api-handler?token=${accessToken}`)\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error(`Fetch operation 2 failed with status: ${response.status}`);\n          }\n          return response.json();\n        })\n        .then((data) => setData(data))\n        .catch((error) => console.error('Fetch operation 2: There was an error:', error));\n    }\n  }, [accessToken]);\n\n  return (\n    <div>\n      {!accessToken && (\n        <Button color=\"secondary\" onClick={handleButtonClick} className={classes.canvasLogin}>\n          Log in\n        </Button>\n      )}\n      {accessToken && !data && <p>Loading...</p>}\n      {data && <pre>{JSON.stringify(data, null, 2)}</pre>}\n    </div>\n  );\n}\n\nexport default App;\n",{"ruleId":"9","severity":1,"message":"10","line":8,"column":31,"nodeType":"11","messageId":"12","endLine":8,"endColumn":36},"no-unused-vars","'theme' is defined but never used.","Identifier","unusedVar"]